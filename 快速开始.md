# 快速开始指南

## 1. 环境准备

### 必需环境
- **Node.js**: 22.x 或更高版本
- **包管理器**: pnpm (推荐) 或 npm

### 检查环境
```bash
# 检查 Node.js 版本
node --version  # 应该输出 v22.x.x

# 如果版本不对，使用 nvm 切换
nvm use 22

# 检查 pnpm
pnpm --version
```

## 2. 安装依赖

```bash
# 进入项目目录
cd camera-anktech-system

# 安装依赖（使用 pnpm，推荐）
pnpm install

# 或使用 npm
npm install
```

## 3. 启动开发服务器

```bash
# 使用 pnpm
pnpm dev

# 或使用 npm
npm run dev
```

服务器启动后，访问: `http://localhost:3000`

## 4. 登录配置

默认登录信息（可在 `src/pages/MonitoringPage.tsx` 中修改）:

```typescript
const LOGIN_CONFIG = {
  userId: 'test1',
  password: '123',
  debug: true,
};
```

## 5. 使用功能

### 5.1 查看设备列表
- 登录后，左侧面板会自动显示设备树
- 绿色圆点表示设备在线
- 红色圆点表示设备离线

### 5.2 打开视频
1. 展开设备节点
2. 点击通道名称
3. 视频将在右侧播放区域显示

### 5.3 视频操作
- **选择视频**: 点击视频窗口，会显示蓝色边框
- **截图**: 选中视频后，点击顶部"截图"按钮
- **关闭视频**: 点击视频右上角的"×"按钮

### 5.4 多视频布局
- 第一个窗口: 主视频（宽屏）
- 其余 4 个窗口: 子视频（等宽）

## 6. 常见问题

### Q1: 依赖安装失败
```bash
# 清理缓存后重新安装
pnpm store prune
pnpm install --force
```

### Q2: 端口被占用
修改 `vite.config.ts`:
```typescript
server: {
  port: 3001,  // 改为其他端口
  host: '0.0.0.0',
}
```

### Q3: 视频无法播放
- 检查网络连接
- 确认 AnkTech 服务器地址正确
- 查看浏览器控制台错误信息
- 确认设备在线状态

### Q4: TypeScript 错误
```bash
# 重新生成类型
pnpm type-check
```

### Q5: 热更新不生效
```bash
# 重启开发服务器
# Ctrl+C 停止，然后重新运行
pnpm dev
```

## 7. 生产构建

```bash
# 构建
pnpm build

# 预览构建结果
pnpm preview
```

构建产物在 `dist` 目录。

## 8. 目录说明

```
camera-anktech-system/
├── src/
│   ├── assets/anktech/        # AnkTech SDK (不要修改)
│   ├── components/
│   │   ├── common/            # 通用组件（Header, Footer等）
│   │   ├── monitoring/        # 监控组件（播放器等）
│   │   └── ui/                # UI组件库（按钮、卡片等）
│   ├── hooks/
│   │   └── useAnkTech.ts      # 核心Hook（设备管理、消息处理）
│   ├── pages/
│   │   └── MonitoringPage.tsx # 主页面
│   ├── services/
│   │   └── AnkTechService.ts  # SDK服务层
│   ├── types/
│   │   └── anktech.ts         # 类型定义
│   ├── App.tsx                # 应用入口
│   └── main.tsx               # React挂载
├── package.json               # 依赖配置
├── vite.config.ts             # Vite配置
└── README.md                  # 项目文档
```

## 9. 开发提示

### 修改登录信息
文件: `src/pages/MonitoringPage.tsx`
```typescript
const LOGIN_CONFIG = {
  userId: '你的用户名',
  password: '你的密码',
  debug: false,  // 生产环境改为 false
};
```

### 查看调试信息
打开浏览器控制台，查看以 `[AnkTech]` 开头的日志。

### 自定义样式
主要使用 Tailwind CSS，修改 `tailwind.config.js` 调整主题。

## 10. 技术支持

遇到问题时:
1. 查看浏览器控制台错误
2. 检查网络请求（Network 标签）
3. 查看 WebSocket 连接状态
4. 参考 `CHANGELOG.md` 了解已知问题

## 11. 下一步

- 阅读 `README.md` 了解详细功能
- 查看 `CHANGELOG.md` 了解更新历史
- 探索 `src/services/AnkTechService.ts` 了解 SDK 使用方式
- 参考 `src/hooks/useAnkTech.ts` 了解状态管理

